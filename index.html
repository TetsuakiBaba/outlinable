<!doctype html>
<html lang="ja">

<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.8.1/font/bootstrap-icons.css">


    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Zen+Antique&display=swap" rel="stylesheet">

    <style>
        body {}

        p {
            line-height: 2.0em;
        }

        box {
            border-bottom: 1px solid black;
        }

        p#moji_count:before {
            content: '[文字数';
        }

        p#moji_count:after {
            content: ']';
        }

        [data-ruby] {
            position: relative;
        }

        [data-ruby]::before {
            content: attr(data-ruby);
            position: absolute;
            top: 0.6em;
            left: -0.5em;
            right: 0;
            margin: auto;
            font-size: 1.0em;
        }
    </style>
    <title>研究骨子ジェネレータ</title>
</head>

<body>
    <nav class="navbar navbar-dark bg-dark">
        <div class="container-sm">

            <span class="navbar-brand mb-0 h1">
                <i class="bi bi-ui-checks-grid"></i>
                outlinable
            </span>
            <span class="small text-muted">研究骨子ジェネレータ</span>
        </div>
    </nav>


    <div class="container-sm">

        <p class="mt-4">
            穴埋め方式で研究やレポート骨子の作成を支援するページです。まずは①〜⑤までの記入欄を埋めてください。すると自動的にあなたのお話の骨子ができあがります。とにかく試してみるだけの場合は、下の「回答例を自動入力」ボタンを押してみましょう。研究骨子が出来上がったら画面一番下にある赤ボタン「さらに研究っぽくする」ボタンでより研究っぽい骨子を目指しましょう。
        </p>
        <div class="mt-4 d-grid gap-2 col-6 mx-auto">
            <button class="btn btn-primary" type="button" onclick="autoFillin(this);">回答例を自動入力</button>
            <script>
                function autoFillin(dom) {
                    console.log(dom)

                    let list_answers = [
                        [
                            'スナック菓子業界',
                            'ポテトチップス等の揚げ物菓子',
                            '食事中における手指への油脂付着',
                            '割り箸利用',
                            '端末やキーボードを汚さずにyoutubeを閲覧できること'
                        ],
                        [
                            '共生社会',
                            '若者への就労支援',
                            '家庭内介護により働く時間や就労の機会損失',
                            'ヤングケアラー脱出を目的とした就労支援',
                            '労働価値の高い若者が社会参画'
                        ]
                    ];
                    let answers = list_answers[parseInt(Math.random() * list_answers.length)];
                    console.log(answers);
                    let count = 1;
                    for (answer of answers) {
                        document.querySelector(`#a${count}`).value = answer;
                        count++;
                    }
                    update();
                }
            </script>
        </div>
        <hr>

        <div class="mb-3 mt-4">
            <label for="exampleFormControlInput1" class="form-label"><span style="font-size:1.5em">①</span>
                あなたの取り組む研究領域</label>
            <input type="text" class="form-control" value="" id="a1" oninput="update();">
        </div>
        <div class="mb-3">
            <label for="exampleFormControlInput1" class="form-label"><span style="font-size:1.5em">②</span>
                ①で特にあなたが取り組む対象</label>
            <input type="text" class="form-control" value="" id="a2" oninput="update();">
        </div>

        <div class="mb-3">
            <label for="exampleFormControlInput1" class="form-label"><span style="font-size:1.5em">③</span>
                ②における既存の問題点</label>
            <input type="text" class="form-control" value="" id="a3" oninput="update();">
        </div>

        <div class="mb-3">
            <label for="exampleFormControlInput1" class="form-label"><span style="font-size:1.5em">④</span>
                ③を解決するための手法</label>
            <input type="text" class="form-control" value="" id="a4" oninput="update();">
        </div>

        <div class="mb-3">
            <label for="exampleFormControlInput1" class="form-label"><span style="font-size:1.5em">⑤</span>
                ③を解決することで実現できること</label>
            <input type="text" class="form-control" value="" id="a5" oninput="update();">
        </div>

        <div class="alert alert-success" role="alert">
            <h5 class="alert-heading">研究骨子 <span class="small text-muted"></span></h5>
            <hr>
            <p id="outline">
                <script>
                    window.onload = function () {
                        update();
                    }
                    function update() {
                        console.log(document.querySelector("#a1"));
                        let a1 = document.querySelector("#a1").value;
                        let a2 = document.querySelector("#a2").value;
                        let a3 = document.querySelector("#a3").value;
                        let a4 = document.querySelector("#a4").value;
                        let a5 = document.querySelector("#a5").value;

                        let = outline = `<box data-ruby="①">${a1}</box>において、<box data-ruby='②'>${a2}</box>は広く知られている。<box data-ruby='②'>${a2}</box>ではこれまで<box data-ruby='③'>${a3}</box>に関する問題があった。そこで我々は<box data-ruby='④'>${a4}</box>を利用することでこの問題を解決する。これにより、将来的には<box data-ruby='⑤'>${a5}</box>も期待できる。`;
                        document.querySelector('#outline').innerHTML = outline;

                        let no_tag_text = outline.replace(/(<([^>]+)>)/gi, '');
                        document.querySelector('#moji_count').innerHTML = no_tag_text.length;
                    }
                </script>
            </p>
            <p id="moji_count" class="text-muted small" style="text-align:right;padding:0px;margin:0px"></p>

        </div>
        <p class="mt-4">
            研究骨子が出来上がったら、下の「更に研究っぽくする」ボタンを押してください。④の項目が①に代入されることで更に具体的にご自身の研究を述べる為、より研究内容が具体的にパワーアップします。
        </p>
        <div class="mt-4 d-grid gap-2 col-6 mx-auto">
            <button class="btn btn-danger" type="button" onclick="revolve(this);">更に研究っぽくする</button>
            <script>
                function revolve(dom) {
                    if (confirm('④が①に移動し、それ以外の記入内容が消去されます。よろしいですか？')) {
                        document.querySelector('#a1').value = document.querySelector('#a4').value;
                        for (let i = 2; i <= 5; i++) {
                            document.querySelector(`#a${i}`).value = "";
                        }
                        update();
                    }
                }
            </script>
        </div>
        <hr>
        <footer class="small text-muted text-center">
            &copy; 2022 <a href="https://tetsuakibaba.jp" target="_blank"
                class="link-secondary text-decoration-none">Tetsuaki BABA</a>
            <a href="" class="link-secondary"><i class="bi-github" role="img" aria-label="GitHub"></i></a>


        </footer>
    </div>


    <!-- Optional JavaScript; choose one of the two! -->

    <!-- Option 1: Bootstrap Bundle with Popper -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p"
        crossorigin="anonymous"></script>

    <!-- Option 2: Separate Popper and Bootstrap JS -->
    <!--
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.10.2/dist/umd/popper.min.js" integrity="sha384-7+zCNj/IqJ95wo16oMtfsKbZ9ccEh31eOz1HGyDuCQ6wgnyJNSYdrPa03rtR1zdB" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.min.js" integrity="sha384-QJHtvGhmr9XOIpI6YVutG+2QOK9T+ZnN4kzFN1RtK3zEFEIsxhlmWl5/YESvpZ13" crossorigin="anonymous"></script>
    -->
</body>

</html>